language: rust

rust:
  - nightly-2019-07-03

env:
  - CODECOV_TOKEN="7743ab68-b2c4-485c-8954-24b8424e7922" RUST_BACKTRACE=1 RUST_TEST_THREADS=1

services:
  - docker


before_install:
  - docker pull mariadb:10.4.5
  - docker run -d --name mariadb -e MYSQL_ROOT_PASSWORD=supersecretpassword mariadb:10.4.5
  - docker inspect mariadb


script:
  - cargo build
  - cargo test --test server_config
  - cargo test --test dbseed
  - cargo test --test kahuna-grande

